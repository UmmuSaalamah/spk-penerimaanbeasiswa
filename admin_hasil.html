<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hasil Perhitungan AHP - Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-gray-50 font-sans">

<div class="max-w-5xl mx-auto py-10">

  <h1 class="text-3xl font-bold text-blue-700 mb-5">üìä Hasil Perhitungan Metode AHP</h1>

  <a href="{{ url_for('admin_dashboard') }}" class="text-blue-600 hover:underline text-sm">
    ‚Üê Kembali ke Dashboard
  </a>

  <!-- Chart -->
  <div class="bg-white shadow-lg rounded-xl p-6 mt-6">
    <canvas id="chartAHP" height="100"></canvas>
  </div>

  <!-- Tabel Hasil Ranking -->
  <div class="bg-white shadow-lg rounded-xl p-6 mt-6">
    <h2 class="text-xl font-semibold mb-4 text-blue-700">Ranking Mahasiswa</h2>
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="bg-blue-600 text-white">
          <th class="p-3">Peringkat</th>
          <th class="p-3">Nama</th>
          <th class="p-3">Skor</th>
        </tr>
      </thead>
      <tbody>
        {% for r in ranking %}
        <tr class="border-b hover:bg-gray-100">
          <td class="p-3">{{ loop.index }}</td>
          <td class="p-3">{{ r.alternative }}</td>
          <td class="p-3">{{ "%.4f"|format(r.score) }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <a href="{{ url_for('export_excel') }}"
      class="mt-5 inline-block bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg">
      ‚¨á Export Excel
    </a>
  </div>

</div>


<!-- ================= SCRIPT CHART ================= -->
<script>
    var labels = JSON.parse('{{ labels|tojson|safe }}');
    var scores = JSON.parse('{{ scores|tojson|safe }}');

    const data = {
        labels: labels,
        datasets: [{
            label: 'Nilai Akhir AHP',
            data: scores,
            borderWidth: 1
        }]
    };

    const config = {
        type: 'bar',
        data: data,
        options: { responsive: true }
    };

    new Chart(document.getElementById('chartHasil'), config);
</script>
